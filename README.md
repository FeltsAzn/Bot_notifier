# Бот для отслеживания котировок на криптобиржах.

Запуск из терминала -> `python3 app.py`

Приложение написано на библиотеке `aiogramm`. Имеется два типа работы: однопоточный режим и мультипроцессорный.
Изменение режима работы бота возможна через файл "*.env*".

Для запуска мультипроцессорного режима `MULTIPROCESSORING=ON`
Для запуска однопоточного режима `MULTIPROCESSORING={Любые символы}`

Бот состоит из 3-х частей:

- Реализация уведомлений пользователей находится в папке *alerts_worker*.

- База данных пользователей бота и методы CRUD лежат в папке *db*.

- Обработчики клавиатуры бота лежат в папке *handlers*


### Администратор
Административный интерфейс состоит списка пользователей и настроек администратора(пока в работе)

#### Список пользователей:
Просмотр списка пользователей через inline-keyboard.
Доступная информация:
- Telegram id
- Имя пользователя
- Активность уведомлений

Есть возможность удаление пользователя по желанию администратора
(отключена возможность удаления самого себя через административную панель).

### Пользователь
Пользовательский интерфейс состоит из списка отслеживаемых бирж и настроек

#### Настройки
- Отключение/включение уведомлений от бота.
- Удаление аккаунта из базы бота, для прекращения получения сообщений
(бот записывает пользователя в базу и будет присылать уведомления,
даже после удаления диалога с ботом)

**Пользователь бота получает уведомления о котировках валют только доступных для продажи/покупки.**


Бот настроен на постоянную работу на сервере, поэтому только в случае критической ошибки
произойдёт выход из приложения (отключение сервера, ручная остановка, ошибка телеграмма).

Запросы к биржам осуществляется через внутренний сервис написанный на `FastAPI`.

Фильтрование информации по валютам осуществляется через `config.py` файл в папке *alerts_worker*.
Где выставлены константы:
- Высокий процент (выделяется в уведомлениях)
- Стартовый процент, при котором начинаются отправляться уведомления пользователям
- Минимальный шаг вверх, при повышении разрыва котировок
- Минимальный шаг вниз при повышении разрыва котировок

Время прохода цикла обработки информации с бирж ~3 секунды.

